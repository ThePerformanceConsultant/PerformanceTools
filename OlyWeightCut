<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>React App</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
        sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
  </style>
  <script type="importmap">
  {
    "imports": {
      "react": "https://esm.sh/react@18.2.0",
      "react-dom/client": "https://esm.sh/react-dom@18.2.0/client"
    }
  }
  </script>
</head>
<body>
  <div id="app"></div>
  <script type="module" src="./src/index.tsx"></script>
</body>
</html>
.info-tooltip-container {
  position: relative;
  display: inline-flex;
  align-items: center;
}

.info-tooltip-trigger {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 0.9rem;
  padding: 0;
  line-height: 1;
  opacity: 0.7;
  transition: opacity 0.2s ease;
}

.info-tooltip-trigger:hover {
  opacity: 1;
}

.info-tooltip-content {
  position: absolute;
  bottom: calc(100% + 10px);
  left: 50%;
  transform: translateX(-50%);
  background: #1a1a2e;
  color: white;
  padding: 15px;
  border-radius: 10px;
  font-size: 0.85rem;
  line-height: 1.5;
  width: 280px;
  max-width: 90vw;
  z-index: 1000;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  animation: tooltipFade 0.2s ease;
}

.info-tooltip-content::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 8px solid transparent;
  border-top-color: #1a1a2e;
}

.info-tooltip-content strong {
  color: #e94560;
}

.info-tooltip-content em {
  color: #90caf9;
  font-style: normal;
}

@keyframes tooltipFade {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(5px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

@media (max-width: 768px) {
  .info-tooltip-content {
    left: auto;
    right: -10px;
    transform: none;
  }
  
  .info-tooltip-content::after {
    left: auto;
    right: 15px;
    transform: none;
  }
}
import React, { useState, useRef, useEffect } from 'react';
import './InfoTooltip.css';

interface InfoTooltipProps {
  children: React.ReactNode;
}

function InfoTooltip({ children }: InfoTooltipProps) {
  const [isVisible, setIsVisible] = useState(false);
  const tooltipRef = useRef<HTMLDivElement>(null);
  const buttonRef = useRef<HTMLButtonElement>(null);

  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (
        tooltipRef.current &&
        !tooltipRef.current.contains(event.target as Node) &&
        buttonRef.current &&
        !buttonRef.current.contains(event.target as Node)
      ) {
        setIsVisible(false);
      }
    };

    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, []);

  return (
    <div className="info-tooltip-container">
      <button
        ref={buttonRef}
        type="button"
        className="info-tooltip-trigger"
        onClick={() => setIsVisible(!isVisible)}
        onMouseEnter={() => setIsVisible(true)}
        onMouseLeave={() => setIsVisible(false)}
        aria-label="More information"
      >
        ‚ÑπÔ∏è
      </button>
      {isVisible && (
        <div ref={tooltipRef} className="info-tooltip-content">
          {children}
        </div>
      )}
    </div>
  );
}

export default InfoTooltip;
.calculator-form {
  background: white;
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

.form-section {
  margin-bottom: 30px;
  padding-bottom: 25px;
  border-bottom: 1px solid #eee;
}

.form-section:last-of-type {
  border-bottom: none;
  margin-bottom: 20px;
}

.section-title {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 0 0 5px 0;
  font-size: 1.2rem;
  color: #1a1a2e;
}

.section-icon {
  font-size: 1.3rem;
}

.section-subtitle {
  margin: 0 0 20px 0;
  font-size: 0.9rem;
  color: #666;
}

.input-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.input-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.input-group label {
  font-weight: 600;
  font-size: 0.9rem;
  color: #333;
  display: flex;
  align-items: center;
  gap: 8px;
}

.input-group input,
.input-group select {
  padding: 12px 15px;
  border: 2px solid #e0e0e0;
  border-radius: 10px;
  font-size: 1rem;
  transition: all 0.2s ease;
  background: #fafafa;
}

.input-group input:focus,
.input-group select:focus {
  outline: none;
  border-color: #e94560;
  background: white;
  box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
}

.input-group input[type="number"] {
  -moz-appearance: textfield;
}

.input-group input[type="number"]::-webkit-outer-spin-button,
.input-group input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.slider-group {
  margin-bottom: 25px;
}

.slider-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}

.slider-header label {
  font-weight: 600;
  font-size: 0.95rem;
  color: #333;
}

.slider-header label strong {
  color: #e94560;
  font-size: 1.1rem;
}

.slider {
  width: 100%;
  height: 8px;
  border-radius: 4px;
  background: #e0e0e0;
  outline: none;
  -webkit-appearance: none;
  appearance: none;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: linear-gradient(135deg, #e94560 0%, #c73e54 100%);
  cursor: pointer;
  border: 3px solid white;
  box-shadow: 0 2px 8px rgba(233, 69, 96, 0.4);
  transition: transform 0.2s ease;
}

.slider::-webkit-slider-thumb:hover {
  transform: scale(1.1);
}

.slider::-moz-range-thumb {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: linear-gradient(135deg, #e94560 0%, #c73e54 100%);
  cursor: pointer;
  border: 3px solid white;
  box-shadow: 0 2px 8px rgba(233, 69, 96, 0.4);
}

.slider-labels {
  display: flex;
  justify-content: space-between;
  margin-top: 8px;
  font-size: 0.85rem;
  color: #888;
}

.example-text {
  margin-top: 12px;
  padding: 10px 15px;
  background: #f8f9fa;
  border-radius: 8px;
  font-size: 0.9rem;
  color: #555;
}

.example-text strong {
  color: #e94560;
}

.info-box {
  display: flex;
  gap: 15px;
  padding: 15px;
  background: linear-gradient(135deg, #fff8e1 0%, #fff3c4 100%);
  border-radius: 10px;
  margin-top: 20px;
  border: 1px solid #ffe082;
}

.info-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.info-box strong {
  color: #f57c00;
  display: block;
  margin-bottom: 8px;
}

.info-box p {
  margin: 0;
  font-size: 0.9rem;
  color: #666;
  line-height: 1.6;
}

.calculate-btn {
  width: 100%;
  padding: 18px 30px;
  font-size: 1.1rem;
  font-weight: 700;
  color: white;
  background: linear-gradient(135deg, #e94560 0%, #c73e54 100%);
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(233, 69, 96, 0.3);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.calculate-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 25px rgba(233, 69, 96, 0.4);
}

.calculate-btn:active {
  transform: translateY(0);
}

@media (max-width: 768px) {
  .calculator-form {
    padding: 20px;
  }
  
  .input-grid {
    grid-template-columns: 1fr;
  }
}
import React, { useState } from 'react';
import './CalculatorForm.css';
import { UserInputs } from '../../utils/calculations';
import InfoTooltip from '../../components/InfoTooltip';

interface CalculatorFormProps {
  onCalculate: (inputs: UserInputs) => void;
}

function CalculatorForm({ onCalculate }: CalculatorFormProps) {
  const [age, setAge] = useState(25);
  const [weight, setWeight] = useState(85);
  const [height, setHeight] = useState(175);
  const [gender, setGender] = useState<'male' | 'female'>('male');
  const [steps, setSteps] = useState(12000);
  const [trainingSessions, setTrainingSessions] = useState(5);
  const [cardioMinutes, setCardioMinutes] = useState(60);
  const [weightToLose, setWeightToLose] = useState(6);
  const [risk, setRisk] = useState<'low' | 'medium' | 'high'>('medium');
  const [refuelling, setRefuelling] = useState<'steady' | 'rapid'>('steady');
  const [wakeTime, setWakeTime] = useState('06:00');
  const [trainingTime, setTrainingTime] = useState('17:00');

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    onCalculate({
      age,
      weight,
      height,
      gender,
      steps,
      trainingSessions,
      cardioMinutes,
      weightToLose,
      risk,
      refuelling,
      wakeTime,
      trainingTime,
    });
  };

  const weightLossExample = ((weight * weightToLose) / 100).toFixed(1);

  return (
    <form className="calculator-form" onSubmit={handleSubmit}>
      <section className="form-section">
        <h2 className="section-title">
          <span className="section-icon">üë§</span>
          Personal Details
        </h2>
        <p className="section-subtitle">Used for BMR calculation</p>
        
        <div className="input-grid">
          <div className="input-group">
            <label htmlFor="age">Age (years)</label>
            <input
              type="number"
              id="age"
              value={age}
              onChange={(e) => setAge(Number(e.target.value))}
              min={16}
              max={65}
            />
          </div>
          
          <div className="input-group">
            <label htmlFor="weight">Weight (kg)</label>
            <input
              type="number"
              id="weight"
              value={weight}
              onChange={(e) => setWeight(Number(e.target.value))}
              min={40}
              max={200}
              step={0.5}
            />
          </div>
          
          <div className="input-group">
            <label htmlFor="height">Height (cm)</label>
            <input
              type="number"
              id="height"
              value={height}
              onChange={(e) => setHeight(Number(e.target.value))}
              min={140}
              max={220}
            />
          </div>
          
          <div className="input-group">
            <label htmlFor="gender">Gender</label>
            <select
              id="gender"
              value={gender}
              onChange={(e) => setGender(e.target.value as 'male' | 'female')}
            >
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
          </div>
        </div>
      </section>

      <section className="form-section">
        <h2 className="section-title">
          <span className="section-icon">üèÉ</span>
          Activity Levels
        </h2>
        
        <div className="slider-group">
          <div className="slider-header">
            <label htmlFor="steps">Daily Steps: <strong>{steps.toLocaleString()}</strong></label>
            <InfoTooltip>
              <strong>More steps = More carbs = Better performance preservation</strong>
              <br /><br />
              Higher step counts allow for more dietary carbohydrates, which helps preserve training performance and reduces hunger during your cut.
              <br /><br />
              <em>Tip: On average, 30 minutes of walking achieves approximately 5,000 steps for most people.</em>
            </InfoTooltip>
          </div>
          <input
            type="range"
            id="steps"
            value={steps}
            onChange={(e) => setSteps(Number(e.target.value))}
            min={10000}
            max={15000}
            step={500}
            className="slider"
          />
          <div className="slider-labels">
            <span>10,000</span>
            <span>15,000</span>
          </div>
        </div>
        
        <div className="input-grid">
          <div className="input-group">
            <label htmlFor="trainingSessions">
              Training Sessions/Week
              <InfoTooltip>
                Olympic weightlifting sessions (typically 1.5-2.5 hours including rest periods). 
                Lower volume and longer rest compared to bodybuilding-style training.
              </InfoTooltip>
            </label>
            <input
              type="number"
              id="trainingSessions"
              value={trainingSessions}
              onChange={(e) => setTrainingSessions(Number(e.target.value))}
              min={2}
              max={12}
            />
          </div>
          
          <div className="input-group">
            <label htmlFor="cardioMinutes">
              Cardio Minutes/Week
              <InfoTooltip>
                Low-moderate intensity cardio (55-65% VO2max). 
                Examples: Brisk walking, easy cycling, or light rowing.
              </InfoTooltip>
            </label>
            <input
              type="number"
              id="cardioMinutes"
              value={cardioMinutes}
              onChange={(e) => setCardioMinutes(Number(e.target.value))}
              min={0}
              max={300}
              step={15}
            />
          </div>
        </div>
      </section>

      <section className="form-section">
        <h2 className="section-title">
          <span className="section-icon">üéØ</span>
          Cut Parameters
        </h2>
        
        <div className="slider-group">
          <div className="slider-header">
            <label htmlFor="weightToLose">
              Target Weight Loss: <strong>{weightToLose}%</strong> body mass
            </label>
          </div>
          <input
            type="range"
            id="weightToLose"
            value={weightToLose}
            onChange={(e) => setWeightToLose(Number(e.target.value))}
            min={4}
            max={8}
            step={0.5}
            className="slider"
          />
          <div className="slider-labels">
            <span>4%</span>
            <span>8%</span>
          </div>
          <p className="example-text">
            Example: At {weight}kg, losing {weightToLose}% = <strong>{weightLossExample}kg</strong> total weight loss
          </p>
        </div>
        
        <div className="input-grid">
          <div className="input-group">
            <label htmlFor="risk">
              Risk Tolerance
              <InfoTooltip>
                <strong>Low:</strong> Conservative approach, prioritizes safety and performance maintenance. Results in a more aggressive deficit (shorter duration).
                <br /><br />
                <strong>Medium:</strong> Balanced approach for most athletes.
                <br /><br />
                <strong>High:</strong> For experienced cutters comfortable with larger weight fluctuations. Results in a less aggressive daily deficit.
              </InfoTooltip>
            </label>
            <select
              id="risk"
              value={risk}
              onChange={(e) => setRisk(e.target.value as 'low' | 'medium' | 'high')}
            >
              <option value="low">Low (Conservative)</option>
              <option value="medium">Medium (Balanced)</option>
              <option value="high">High (Aggressive)</option>
            </select>
          </div>
          
          <div className="input-group">
            <label htmlFor="refuelling">
              Refuelling Strategy
              <InfoTooltip>
                <strong>Steady:</strong> 3 weeks of rapid fat loss with more aggressive deficit, followed by progressive refuelling. Better for those who prefer getting the hard part done quickly.
                <br /><br />
                <strong>Rapid:</strong> 4 weeks of moderate deficit, followed by rapid refuelling closer to competition. More sustainable day-to-day but less buffer time.
              </InfoTooltip>
            </label>
            <select
              id="refuelling"
              value={refuelling}
              onChange={(e) => setRefuelling(e.target.value as 'steady' | 'rapid')}
            >
              <option value="steady">Steady Refuelling</option>
              <option value="rapid">Rapid Refuelling</option>
            </select>
          </div>
        </div>
        
        <div className="info-box refuelling-note">
          <span className="info-icon">üí°</span>
          <div>
            <strong>Refuelling Strategy Note:</strong>
            <p>
              <strong>Steady</strong> = More aggressive initial deficit (3 weeks) but gradual, progressive refuelling phase.
              <br />
              <strong>Rapid</strong> = Less aggressive initial deficit (4 weeks) but faster refuelling closer to competition.
            </p>
          </div>
        </div>
      </section>

      <section className="form-section">
        <h2 className="section-title">
          <span className="section-icon">‚è∞</span>
          Schedule
        </h2>
        
        <div className="input-grid">
          <div className="input-group">
            <label htmlFor="wakeTime">Wake Time</label>
            <input
              type="time"
              id="wakeTime"
              value={wakeTime}
              onChange={(e) => setWakeTime(e.target.value)}
            />
          </div>
          
          <div className="input-group">
            <label htmlFor="trainingTime">Training Time</label>
            <input
              type="time"
              id="trainingTime"
              value={trainingTime}
              onChange={(e) => setTrainingTime(e.target.value)}
            />
          </div>
        </div>
      </section>

      <button type="submit" className="calculate-btn">
        Calculate Macros & Generate Meal Plan
      </button>
    </form>
  );
}

export default CalculatorForm;
.fluid-guidelines {
  background: white;
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  border-top: 4px solid #2196f3;
}

.fluid-header {
  text-align: center;
  margin-bottom: 25px;
}

.fluid-header h2 {
  margin: 0 0 8px 0;
  color: #1a1a2e;
  font-size: 1.5rem;
}

.fluid-subtitle {
  margin: 0;
  color: #1565c0;
  font-weight: 600;
  font-size: 0.95rem;
}

.fluid-content {
  display: grid;
  gap: 25px;
}

.fluid-target-card {
  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
  border-radius: 16px;
  padding: 30px;
  text-align: center;
}

.fluid-icon {
  font-size: 3rem;
  margin-bottom: 15px;
}

.fluid-target {
  margin-bottom: 10px;
}

.fluid-range {
  display: block;
  font-size: 2.5rem;
  font-weight: 800;
  color: #1565c0;
  line-height: 1;
}

.fluid-unit {
  display: block;
  font-size: 1.1rem;
  color: #1976d2;
  margin-top: 5px;
}

.fluid-calculation {
  font-size: 0.9rem;
  color: #666;
}

.fluid-tips {
  background: #f8f9fa;
  border-radius: 12px;
  padding: 20px;
}

.fluid-tips h4 {
  margin: 0 0 15px 0;
  color: #1a1a2e;
  font-size: 1rem;
}

.fluid-tips ul {
  margin: 0;
  padding-left: 20px;
}

.fluid-tips li {
  margin-bottom: 10px;
  color: #555;
  font-size: 0.9rem;
  line-height: 1.5;
}

.fluid-tips li:last-child {
  margin-bottom: 0;
}

.fluid-sources {
  background: #fafafa;
  border-radius: 12px;
  padding: 20px;
}

.fluid-sources h4 {
  margin: 0 0 15px 0;
  color: #1a1a2e;
  font-size: 1rem;
}

.sources-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 10px;
}

.source-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 8px;
  font-size: 0.9rem;
}

.source-item.good {
  background: #e8f5e9;
  color: #2e7d32;
}

.source-item.limited {
  background: #fff8e1;
  color: #f57c00;
}

.source-item.avoid {
  background: #ffebee;
  color: #c62828;
}

.source-icon {
  flex-shrink: 0;
}

.fluid-note {
  display: flex;
  gap: 15px;
  padding: 20px;
  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
  border-radius: 12px;
  border: 1px solid #ffb74d;
  margin-top: 10px;
}

.fluid-note .note-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.fluid-note p {
  margin: 0;
  font-size: 0.9rem;
  color: #e65100;
  line-height: 1.6;
}

.fluid-note strong {
  color: #bf360c;
}

@media (max-width: 768px) {
  .fluid-guidelines {
    padding: 20px;
  }
  
  .fluid-range {
    font-size: 2rem;
  }
  
  .sources-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
import React from 'react';
import './FluidGuidelines.css';

interface FluidGuidelinesProps {
  weightKg: number;
}

function FluidGuidelines({ weightKg }: FluidGuidelinesProps) {
  const fluidTargetLow = Math.round(weightKg * 40);
  const fluidTargetHigh = Math.round(weightKg * 45);

  return (
    <div className="fluid-guidelines">
      <div className="fluid-header">
        <h2>üíß Fluid Guidelines</h2>
        <p className="fluid-subtitle">Weeks 1-5 (Entire Protocol)</p>
      </div>

      <div className="fluid-content">
        <div className="fluid-target-card">
          <div className="fluid-icon">ü•§</div>
          <div className="fluid-target">
            <span className="fluid-range">{fluidTargetLow} - {fluidTargetHigh}</span>
            <span className="fluid-unit">mL/day</span>
          </div>
          <div className="fluid-calculation">
            ({weightKg}kg √ó 40-45mL)
          </div>
        </div>

        <div className="fluid-tips">
          <h4>Hydration Tips</h4>
          <ul>
            <li>Spread fluid intake evenly throughout the day</li>
            <li>Start each day with 500mL of water upon waking</li>
            <li>Drink 500mL with each main meal</li>
            <li>Sip water during training sessions</li>
            <li>Monitor urine colour - aim for pale yellow</li>
            <li>Include electrolytes if training in hot conditions or sweating heavily</li>
          </ul>
        </div>

        <div className="fluid-sources">
          <h4>Acceptable Fluid Sources</h4>
          <div className="sources-grid">
            <div className="source-item good">
              <span className="source-icon">‚úÖ</span>
              <span>Water</span>
            </div>
            <div className="source-item good">
              <span className="source-icon">‚úÖ</span>
              <span>Black Coffee</span>
            </div>
            <div className="source-item good">
              <span className="source-icon">‚úÖ</span>
              <span>Green/Herbal Tea</span>
            </div>
            <div className="source-item good">
              <span className="source-icon">‚úÖ</span>
              <span>Sugar-free Electrolytes</span>
            </div>
            <div className="source-item limited">
              <span className="source-icon">‚ö†Ô∏è</span>
              <span>Diet Soft Drinks (limit)</span>
            </div>
            <div className="source-item avoid">
              <span className="source-icon">‚ùå</span>
              <span>Sugary Drinks</span>
            </div>
            <div className="source-item avoid">
              <span className="source-icon">‚ùå</span>
              <span>Alcohol</span>
            </div>
            <div className="source-item avoid">
              <span className="source-icon">‚ùå</span>
              <span>Fruit Juice</span>
            </div>
          </div>
        </div>
      </div>

      <div className="fluid-note">
        <span className="note-icon">üìã</span>
        <p>
          <strong>Final Week Guidelines:</strong> Specific fluid manipulation protocols for the final 
          week before competition will be provided separately. These require careful timing and 
          individual adjustments based on your response.
        </p>
      </div>
    </div>
  );
}

export default FluidGuidelines;
.macro-results {
  background: white;
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

.results-header {
  text-align: center;
  margin-bottom: 25px;
}

.results-header h2 {
  margin: 0 0 15px 0;
  color: #1a1a2e;
  font-size: 1.5rem;
}

.phase-info {
  display: flex;
  justify-content: center;
  gap: 15px;
  flex-wrap: wrap;
}

.phase-badge,
.deficit-badge {
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: 600;
}

.phase-badge {
  background: #e3f2fd;
  color: #1565c0;
}

.deficit-badge {
  background: #fce4ec;
  color: #c2185b;
}

.energy-breakdown {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
  margin-bottom: 30px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 12px;
  flex-wrap: wrap;
}

.energy-item {
  text-align: center;
  padding: 15px 25px;
  background: white;
  border-radius: 10px;
  min-width: 150px;
}

.energy-item.target {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  color: white;
}

.energy-label {
  display: block;
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  opacity: 0.8;
  margin-bottom: 5px;
}

.energy-value {
  display: block;
  font-size: 1.5rem;
  font-weight: 700;
}

.energy-arrow {
  font-size: 1.5rem;
  color: #e94560;
}

.macros-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.macro-card {
  text-align: center;
  padding: 25px 20px;
  border-radius: 16px;
  position: relative;
  overflow: hidden;
}

.macro-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
}

.macro-card.protein {
  background: linear-gradient(180deg, #ffebee 0%, #fff 100%);
}

.macro-card.protein::before {
  background: #e94560;
}

.macro-card.carbs {
  background: linear-gradient(180deg, #e3f2fd 0%, #fff 100%);
}

.macro-card.carbs::before {
  background: #2196f3;
}

.macro-card.fats {
  background: linear-gradient(180deg, #fff8e1 0%, #fff 100%);
}

.macro-card.fats::before {
  background: #ff9800;
}

.macro-icon {
  font-size: 2rem;
  margin-bottom: 10px;
}

.macro-value {
  font-size: 2.5rem;
  font-weight: 800;
  color: #1a1a2e;
  line-height: 1;
}

.macro-label {
  font-size: 1rem;
  font-weight: 600;
  color: #333;
  margin: 8px 0;
}

.macro-detail {
  font-size: 0.8rem;
  color: #888;
}

.macro-kcal {
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px dashed #ddd;
  font-size: 0.9rem;
  color: #666;
  font-weight: 500;
}

.projections {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  padding: 25px;
  border-radius: 12px;
  margin-bottom: 25px;
}

.projections h3 {
  margin: 0 0 20px 0;
  color: #1a1a2e;
  font-size: 1.1rem;
  text-align: center;
}

.projection-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 15px;
}

.projection-item {
  text-align: center;
  padding: 15px;
  background: white;
  border-radius: 10px;
}

.projection-value {
  display: block;
  font-size: 1.8rem;
  font-weight: 700;
  color: #e94560;
}

.projection-label {
  display: block;
  font-size: 0.8rem;
  color: #666;
  margin-top: 5px;
}

.projection-note {
  text-align: center;
  font-size: 0.85rem;
  color: #888;
  margin: 15px 0 0 0;
  font-style: italic;
}

.breakdown-details {
  padding: 20px;
  background: #fafafa;
  border-radius: 12px;
  border: 1px dashed #ddd;
}

.breakdown-details h3 {
  margin: 0 0 15px 0;
  font-size: 1rem;
  color: #666;
}

.breakdown-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 10px;
}

.breakdown-item {
  display: flex;
  justify-content: space-between;
  padding: 10px;
  background: white;
  border-radius: 8px;
}

.breakdown-label {
  color: #666;
  font-size: 0.9rem;
}

.breakdown-value {
  font-weight: 600;
  color: #1a1a2e;
}

@media (max-width: 768px) {
  .macro-results {
    padding: 20px;
  }
  
  .energy-breakdown {
    flex-direction: column;
    gap: 10px;
  }
  
  .energy-arrow {
    transform: rotate(90deg);
  }
  
  .macros-grid {
    grid-template-columns: 1fr;
  }
}
import React from 'react';
import './MacroResults.css';
import { MacroResults as MacroResultsType, UserInputs } from '../../utils/calculations';

interface MacroResultsProps {
  results: MacroResultsType;
  inputs: UserInputs;
}

function MacroResults({ results, inputs }: MacroResultsProps) {
  const phaseDuration = inputs.refuelling === 'steady' ? 3 : 4;
  const expectedWeightLoss = (results.weeklyWeightLoss * phaseDuration).toFixed(1);
  
  return (
    <div className="macro-results">
      <div className="results-header">
        <h2>üî• Rapid Fat Loss Phase</h2>
        <p className="phase-info">
          <span className="phase-badge">Weeks 1-{phaseDuration}</span>
          <span className="deficit-badge">{results.deficitPercent}% Deficit</span>
        </p>
      </div>
      
      <div className="energy-breakdown">
        <div className="energy-item">
          <span className="energy-label">Estimated TDEE</span>
          <span className="energy-value">{results.tdee} kcal</span>
        </div>
        <div className="energy-arrow">‚Üí</div>
        <div className="energy-item target">
          <span className="energy-label">Target Intake</span>
          <span className="energy-value">{results.calories} kcal</span>
        </div>
      </div>
      
      <div className="macros-grid">
        <div className="macro-card protein">
          <div className="macro-icon">ü•©</div>
          <div className="macro-value">{results.protein}g</div>
          <div className="macro-label">Protein</div>
          <div className="macro-detail">1g per lb body weight</div>
          <div className="macro-kcal">{results.protein * 4} kcal</div>
        </div>
        
        <div className="macro-card carbs">
          <div className="macro-icon">üçö</div>
          <div className="macro-value">{results.carbs}g</div>
          <div className="macro-label">Carbohydrates</div>
          <div className="macro-detail">Performance fuel</div>
          <div className="macro-kcal">{results.carbs * 4} kcal</div>
        </div>
        
        <div className="macro-card fats">
          <div className="macro-icon">ü•ë</div>
          <div className="macro-value">{results.fats}g</div>
          <div className="macro-label">Fats</div>
          <div className="macro-detail">0.35g per kg body weight</div>
          <div className="macro-kcal">{results.fats * 9} kcal</div>
        </div>
      </div>
      
      <div className="projections">
        <h3>Projected Outcomes</h3>
        <div className="projection-grid">
          <div className="projection-item">
            <span className="projection-value">{results.weeklyWeightLoss}kg</span>
            <span className="projection-label">Expected Weekly Loss</span>
          </div>
          <div className="projection-item">
            <span className="projection-value">{expectedWeightLoss}kg</span>
            <span className="projection-label">Total Phase Loss (~{((parseFloat(expectedWeightLoss) / inputs.weight) * 100).toFixed(1)}%)</span>
          </div>
          <div className="projection-item">
            <span className="projection-value">{(inputs.weight - parseFloat(expectedWeightLoss)).toFixed(1)}kg</span>
            <span className="projection-label">End of Phase Weight</span>
          </div>
        </div>
        <p className="projection-note">
          * Remaining weight loss (~2-3%) will come from low-residue diet and fluid manipulation in the final week
        </p>
      </div>
      
      <div className="breakdown-details">
        <h3>Calculation Breakdown</h3>
        <div className="breakdown-grid">
          <div className="breakdown-item">
            <span className="breakdown-label">BMR (Mifflin-St Jeor)</span>
            <span className="breakdown-value">{results.bmr} kcal</span>
          </div>
          <div className="breakdown-item">
            <span className="breakdown-label">Daily Steps ({inputs.steps.toLocaleString()})</span>
            <span className="breakdown-value">+{results.stepsCalories} kcal</span>
          </div>
          <div className="breakdown-item">
            <span className="breakdown-label">Training ({inputs.trainingSessions}x/week)</span>
            <span className="breakdown-value">+{results.trainingCaloriesDaily} kcal/day</span>
          </div>
          <div className="breakdown-item">
            <span className="breakdown-label">Cardio ({inputs.cardioMinutes} min/week)</span>
            <span className="breakdown-value">+{results.cardioCaloriesDaily} kcal/day</span>
          </div>
          <div className="breakdown-item">
            <span className="breakdown-label">NEAT Estimate</span>
            <span className="breakdown-value">+{results.neatCalories} kcal</span>
          </div>
        </div>
      </div>
    </div>
  );
}

export default MacroResults;
.meal-plan {
  background: white;
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

.meal-plan-header {
  text-align: center;
  margin-bottom: 25px;
}

.meal-plan-header h2 {
  margin: 0 0 10px 0;
  color: #1a1a2e;
  font-size: 1.5rem;
}

.meal-plan-subtitle {
  margin: 0;
  color: #666;
  font-size: 0.95rem;
}

.early-training-note {
  margin-top: 15px;
  padding: 15px;
  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
  border-radius: 10px;
  font-size: 0.9rem;
  color: #e65100;
  display: flex;
  align-items: flex-start;
  gap: 10px;
  text-align: left;
}

.note-icon {
  font-size: 1.2rem;
  flex-shrink: 0;
}

.meals-container {
  display: grid;
  gap: 20px;
  margin-bottom: 25px;
}

.meal-card {
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.2s ease;
}

.meal-card:hover {
  border-color: #ccc;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}

.meal-card.pre-training {
  border-color: #4caf50;
  background: linear-gradient(180deg, #e8f5e9 0%, #fff 20%);
}

.meal-card.post-training {
  border-color: #2196f3;
  background: linear-gradient(180deg, #e3f2fd 0%, #fff 20%);
}

.meal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 20px;
  background: #fafafa;
  border-bottom: 1px solid #eee;
}

.meal-card.pre-training .meal-header {
  background: #c8e6c9;
}

.meal-card.post-training .meal-header {
  background: #bbdefb;
}

.meal-title {
  display: flex;
  align-items: center;
  gap: 12px;
}

.meal-icon {
  font-size: 1.5rem;
}

.meal-title h4 {
  margin: 0;
  font-size: 1.1rem;
  color: #1a1a2e;
}

.meal-time {
  font-size: 0.85rem;
  color: #666;
}

.meal-macros-summary {
  font-size: 1.1rem;
  font-weight: 700;
  color: #e94560;
}

.meal-foods {
  padding: 15px 20px;
}

.food-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px dashed #eee;
  gap: 10px;
}

.food-item:last-child {
  border-bottom: none;
}

.food-info {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  flex: 1;
}

.food-category {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 3px 8px;
  border-radius: 4px;
  font-weight: 600;
  background: #f0f0f0;
  color: #666;
}

.food-name {
  font-weight: 500;
  color: #333;
}

.food-amount {
  font-size: 0.9rem;
  color: #888;
  font-weight: 600;
}

.food-macros {
  display: flex;
  gap: 8px;
  font-size: 0.8rem;
  flex-shrink: 0;
}

.food-macros span {
  padding: 4px 8px;
  border-radius: 6px;
  font-weight: 600;
}

.macro-p {
  background: #ffebee;
  color: #c62828;
}

.macro-c {
  background: #e3f2fd;
  color: #1565c0;
}

.macro-f {
  background: #fff8e1;
  color: #ff8f00;
}

.macro-fiber {
  background: #e8f5e9;
  color: #2e7d32;
}

.meal-totals {
  display: flex;
  justify-content: space-around;
  padding: 15px 20px;
  background: #f5f5f5;
  border-top: 1px solid #eee;
}

.meal-total-item {
  text-align: center;
}

.meal-total-item .label {
  display: block;
  font-size: 0.75rem;
  color: #888;
  text-transform: uppercase;
}

.meal-total-item .value {
  display: block;
  font-size: 1rem;
  font-weight: 700;
  color: #333;
}

.totals-summary {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  padding: 25px;
  border-radius: 12px;
  margin-bottom: 25px;
}

.totals-summary h3 {
  margin: 0 0 20px 0;
  color: white;
  text-align: center;
  font-size: 1.1rem;
}

.totals-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 15px;
}

.total-item {
  text-align: center;
  padding: 15px 10px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
}

.total-value {
  display: block;
  font-size: 1.5rem;
  font-weight: 800;
  color: #e94560;
}

.total-label {
  display: block;
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.8);
  margin: 5px 0;
}

.total-target {
  display: block;
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.5);
}

.meal-plan-notes {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 12px;
  border-left: 4px solid #e94560;
}

.meal-plan-notes h3 {
  margin: 0 0 15px 0;
  font-size: 1rem;
  color: #1a1a2e;
}

.meal-plan-notes ul {
  margin: 0;
  padding-left: 20px;
}

.meal-plan-notes li {
  margin-bottom: 10px;
  color: #555;
  font-size: 0.9rem;
  line-height: 1.5;
}

.meal-plan-notes li:last-child {
  margin-bottom: 0;
}

.meal-plan-notes strong {
  color: #e94560;
}

@media (max-width: 768px) {
  .meal-plan {
    padding: 20px;
  }
  
  .food-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }
  
  .food-macros {
    width: 100%;
    justify-content: flex-start;
  }
  
  .meal-totals {
    flex-wrap: wrap;
    gap: 10px;
  }
  
  .meal-total-item {
    flex: 1 1 40%;
  }
}
import React, { useMemo } from 'react';
import './MealPlan.css';
import { MacroResults } from '../../utils/calculations';
import { generateMealPlan, Meal, formatTime, getTimeDifferenceHours } from '../../utils/mealPlanner';

interface MealPlanProps {
  results: MacroResults;
  wakeTime: string;
  trainingTime: string;
}

function MealPlan({ results, wakeTime, trainingTime }: MealPlanProps) {
  const mealPlan = useMemo(() => {
    return generateMealPlan(results, wakeTime, trainingTime);
  }, [results, wakeTime, trainingTime]);

  const totals = useMemo(() => {
    return mealPlan.reduce(
      (acc, meal) => ({
        calories: acc.calories + meal.totalCalories,
        protein: acc.protein + meal.totalProtein,
        carbs: acc.carbs + meal.totalCarbs,
        fats: acc.fats + meal.totalFats,
        fiber: acc.fiber + meal.totalFiber,
      }),
      { calories: 0, protein: 0, carbs: 0, fats: 0, fiber: 0 }
    );
  }, [mealPlan]);

  const hoursUntilTraining = getTimeDifferenceHours(wakeTime, trainingTime);
  const isEarlyTraining = hoursUntilTraining >= 0 && hoursUntilTraining <= 4;

  return (
    <div className="meal-plan">
      <div className="meal-plan-header">
        <h2>üçΩÔ∏è Rapid Fat Loss Phase Sample Meal Plan</h2>
        <p className="meal-plan-subtitle">
          Optimized for your schedule: Wake {formatTime(wakeTime)} | Training {formatTime(trainingTime)}
        </p>
        {isEarlyTraining && (
          <div className="early-training-note">
            <span className="note-icon">‚ö°</span>
            Since you train within 4 hours of waking, your meal timing has been adjusted. 
            Have a lighter pre-training option and your main "breakfast" meal later in the day.
          </div>
        )}
      </div>

      <div className="meals-container">
        {mealPlan.map((meal, index) => (
          <MealCard key={index} meal={meal} mealNumber={index + 1} />
        ))}
      </div>

      <div className="totals-summary">
        <h3>Daily Totals</h3>
        <div className="totals-grid">
          <div className="total-item">
            <span className="total-value">{Math.round(totals.calories)}</span>
            <span className="total-label">Calories</span>
            <span className="total-target">Target: {results.calories}</span>
          </div>
          <div className="total-item">
            <span className="total-value">{Math.round(totals.protein)}g</span>
            <span className="total-label">Protein</span>
            <span className="total-target">Target: {results.protein}g</span>
          </div>
          <div className="total-item">
            <span className="total-value">{Math.round(totals.carbs)}g</span>
            <span className="total-label">Carbs</span>
            <span className="total-target">Target: {results.carbs}g</span>
          </div>
          <div className="total-item">
            <span className="total-value">{Math.round(totals.fats)}g</span>
            <span className="total-label">Fats</span>
            <span className="total-target">Target: {results.fats}g</span>
          </div>
          <div className="total-item">
            <span className="total-value">{Math.round(totals.fiber)}g</span>
            <span className="total-label">Fiber</span>
            <span className="total-target">Goal: 25-35g</span>
          </div>
        </div>
      </div>

      <div className="meal-plan-notes">
        <h3>üìå Important Notes</h3>
        <ul>
          <li>All weights are for <strong>cooked/prepared</strong> foods unless otherwise noted</li>
          <li>Pre-training meal should be consumed <strong>1-3 hours before</strong> your session</li>
          <li>Post-training meal should be consumed <strong>within 2 hours</strong> of finishing</li>
          <li>Distribute protein intake evenly across meals (aim for 25-40g per meal)</li>
          <li>Prioritize carbohydrates around training for performance</li>
          <li>Vegetables can be increased for satiety without significantly impacting calories</li>
        </ul>
      </div>
    </div>
  );
}

interface MealCardProps {
  meal: Meal;
  mealNumber: number;
}

function MealCard({ meal, mealNumber }: MealCardProps) {
  const mealTypeIcons: Record<string, string> = {
    'Breakfast': 'üåÖ',
    'Pre-Training': 'üí™',
    'Post-Training': 'üèãÔ∏è',
    'Lunch': '‚òÄÔ∏è',
    'Dinner': 'üåô',
    'Snack': 'üçé',
  };

  return (
    <div className={`meal-card ${meal.isPreTraining ? 'pre-training' : ''} ${meal.isPostTraining ? 'post-training' : ''}`}>
      <div className="meal-header">
        <div className="meal-title">
          <span className="meal-icon">{mealTypeIcons[meal.type] || 'üçΩÔ∏è'}</span>
          <div>
            <h4>{meal.name}</h4>
            <span className="meal-time">{meal.time}</span>
          </div>
        </div>
        <div className="meal-macros-summary">
          <span>{Math.round(meal.totalCalories)} kcal</span>
        </div>
      </div>
      
      <div className="meal-foods">
        {meal.foods.map((food, idx) => (
          <div key={idx} className="food-item">
            <div className="food-info">
              <span className="food-category">{food.category}</span>
              <span className="food-name">{food.name}</span>
              <span className="food-amount">{food.amount}g</span>
            </div>
            <div className="food-macros">
              <span className="macro-p" title="Protein">{Math.round(food.protein)}p</span>
              <span className="macro-c" title="Carbs">{Math.round(food.carbs)}c</span>
              <span className="macro-f" title="Fat">{Math.round(food.fat)}f</span>
              <span className="macro-fiber" title="Fiber">{Math.round(food.fiber)}fib</span>
            </div>
          </div>
        ))}
      </div>
      
      <div className="meal-totals">
        <div className="meal-total-item">
          <span className="label">Protein</span>
          <span className="value">{Math.round(meal.totalProtein)}g</span>
        </div>
        <div className="meal-total-item">
          <span className="label">Carbs</span>
          <span className="value">{Math.round(meal.totalCarbs)}g</span>
        </div>
        <div className="meal-total-item">
          <span className="label">Fats</span>
          <span className="value">{Math.round(meal.totalFats)}g</span>
        </div>
        <div className="meal-total-item">
          <span className="label">Fiber</span>
          <span className="value">{Math.round(meal.totalFiber)}g</span>
        </div>
      </div>
    </div>
  );
}

export default MealPlan;
.refuelling-meal-plan {
  background: white;
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  border-top: 4px solid #4caf50;
}

.refuelling-meal-plan .meal-plan-header {
  text-align: center;
  margin-bottom: 25px;
}

.refuelling-meal-plan .meal-plan-header h2 {
  margin: 0 0 10px 0;
  color: #1a1a2e;
  font-size: 1.5rem;
}

.refuelling-meal-plan .meal-plan-subtitle {
  margin: 0 0 20px 0;
  color: #666;
  font-size: 0.95rem;
}

.week-selector {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 15px;
}

.week-btn {
  padding: 10px 25px;
  border: 2px solid #4caf50;
  background: white;
  color: #4caf50;
  border-radius: 25px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.week-btn:hover {
  background: #e8f5e9;
}

.week-btn.active {
  background: #4caf50;
  color: white;
}

.refuelling-meal-plan .early-training-note {
  margin-top: 15px;
  padding: 15px;
  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
  border-radius: 10px;
  font-size: 0.9rem;
  color: #e65100;
  display: flex;
  align-items: flex-start;
  gap: 10px;
  text-align: left;
}

.refuelling-meal-plan .note-icon {
  font-size: 1.2rem;
  flex-shrink: 0;
}

.refuelling-meal-plan .meals-container {
  display: grid;
  gap: 20px;
  margin-bottom: 25px;
}

.refuelling-meal-plan .meal-card {
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.2s ease;
}

.refuelling-meal-plan .meal-card:hover {
  border-color: #ccc;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}

.refuelling-meal-plan .meal-card.pre-training {
  border-color: #4caf50;
  background: linear-gradient(180deg, #e8f5e9 0%, #fff 20%);
}

.refuelling-meal-plan .meal-card.post-training {
  border-color: #2196f3;
  background: linear-gradient(180deg, #e3f2fd 0%, #fff 20%);
}

.refuelling-meal-plan .meal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 20px;
  background: #fafafa;
  border-bottom: 1px solid #eee;
}

.refuelling-meal-plan .meal-card.pre-training .meal-header {
  background: #c8e6c9;
}

.refuelling-meal-plan .meal-card.post-training .meal-header {
  background: #bbdefb;
}

.refuelling-meal-plan .meal-title {
  display: flex;
  align-items: center;
  gap: 12px;
}

.refuelling-meal-plan .meal-icon {
  font-size: 1.5rem;
}

.refuelling-meal-plan .meal-title h4 {
  margin: 0;
  font-size: 1.1rem;
  color: #1a1a2e;
}

.refuelling-meal-plan .meal-time {
  font-size: 0.85rem;
  color: #666;
}

.refuelling-meal-plan .meal-macros-summary {
  font-size: 1.1rem;
  font-weight: 700;
  color: #4caf50;
}

.refuelling-meal-plan .meal-foods {
  padding: 15px 20px;
}

.refuelling-meal-plan .food-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px dashed #eee;
  gap: 10px;
}

.refuelling-meal-plan .food-item:last-child {
  border-bottom: none;
}

.refuelling-meal-plan .food-info {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  flex: 1;
}

.refuelling-meal-plan .food-category {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 3px 8px;
  border-radius: 4px;
  font-weight: 600;
  background: #f0f0f0;
  color: #666;
}

.refuelling-meal-plan .food-name {
  font-weight: 500;
  color: #333;
}

.refuelling-meal-plan .food-amount {
  font-size: 0.9rem;
  color: #888;
  font-weight: 600;
}

.refuelling-meal-plan .food-macros {
  display: flex;
  gap: 8px;
  font-size: 0.8rem;
  flex-shrink: 0;
}

.refuelling-meal-plan .food-macros span {
  padding: 4px 8px;
  border-radius: 6px;
  font-weight: 600;
}

.refuelling-meal-plan .macro-p {
  background: #ffebee;
  color: #c62828;
}

.refuelling-meal-plan .macro-c {
  background: #e3f2fd;
  color: #1565c0;
}

.refuelling-meal-plan .macro-f {
  background: #fff8e1;
  color: #ff8f00;
}

.refuelling-meal-plan .macro-fiber {
  background: #e8f5e9;
  color: #2e7d32;
}

.refuelling-meal-plan .meal-totals {
  display: flex;
  justify-content: space-around;
  padding: 15px 20px;
  background: #f5f5f5;
  border-top: 1px solid #eee;
}

.refuelling-meal-plan .meal-total-item {
  text-align: center;
}

.refuelling-meal-plan .meal-total-item .label {
  display: block;
  font-size: 0.75rem;
  color: #888;
  text-transform: uppercase;
}

.refuelling-meal-plan .meal-total-item .value {
  display: block;
  font-size: 1rem;
  font-weight: 700;
  color: #333;
}

.totals-summary.refuelling {
  background: linear-gradient(135deg, #2e7d32 0%, #388e3c 100%);
}

.totals-summary.refuelling .total-value {
  color: #c8e6c9;
}

.meal-plan-notes.refuelling {
  border-left-color: #4caf50;
}

.meal-plan-notes.refuelling strong {
  color: #2e7d32;
}

@media (max-width: 768px) {
  .refuelling-meal-plan {
    padding: 20px;
  }
  
  .refuelling-meal-plan .food-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }
  
  .refuelling-meal-plan .food-macros {
    width: 100%;
    justify-content: flex-start;
  }
  
  .refuelling-meal-plan .meal-totals {
    flex-wrap: wrap;
    gap: 10px;
  }
  
  .refuelling-meal-plan .meal-total-item {
    flex: 1 1 40%;
  }
  
  .week-selector {
    flex-direction: column;
  }
}
import React, { useMemo, useState } from 'react';
import './RefuellingMealPlan.css';
import { RefuellingPhase } from '../../utils/calculations';
import { generateRefuellingMealPlan, Meal, formatTime, getTimeDifferenceHours } from '../../utils/mealPlanner';

interface RefuellingMealPlanProps {
  refuelling: RefuellingPhase;
  wakeTime: string;
  trainingTime: string;
}

function RefuellingMealPlan({ refuelling, wakeTime, trainingTime }: RefuellingMealPlanProps) {
  const [selectedWeek, setSelectedWeek] = useState<1 | 2>(1);
  const isDoubleWeek = refuelling.weeks === 2;
  
  const mealPlan = useMemo(() => {
    return generateRefuellingMealPlan(refuelling, selectedWeek, wakeTime, trainingTime);
  }, [refuelling, selectedWeek, wakeTime, trainingTime]);

  const totals = useMemo(() => {
    return mealPlan.reduce(
      (acc, meal) => ({
        calories: acc.calories + meal.totalCalories,
        protein: acc.protein + meal.totalProtein,
        carbs: acc.carbs + meal.totalCarbs,
        fats: acc.fats + meal.totalFats,
        fiber: acc.fiber + meal.totalFiber,
      }),
      { calories: 0, protein: 0, carbs: 0, fats: 0, fiber: 0 }
    );
  }, [mealPlan]);

  const hoursUntilTraining = getTimeDifferenceHours(wakeTime, trainingTime);
  const isEarlyTraining = hoursUntilTraining >= 0 && hoursUntilTraining <= 4;

  const targetCalories = selectedWeek === 1 ? refuelling.week1Calories : (refuelling.week2Calories || refuelling.week1Calories);
  const targetCarbs = selectedWeek === 1 ? refuelling.week1Carbs : (refuelling.week2Carbs || refuelling.week1Carbs);
  const targetFats = selectedWeek === 1 ? refuelling.week1Fats : (refuelling.week2Fats || refuelling.week1Fats);

  return (
    <div className="refuelling-meal-plan">
      <div className="meal-plan-header">
        <h2>üçΩÔ∏è Refuelling Phase Sample Meal Plan</h2>
        <p className="meal-plan-subtitle">
          Optimized for your schedule: Wake {formatTime(wakeTime)} | Training {formatTime(trainingTime)}
        </p>
        
        {isDoubleWeek && (
          <div className="week-selector">
            <button 
              className={`week-btn ${selectedWeek === 1 ? 'active' : ''}`}
              onClick={() => setSelectedWeek(1)}
            >
              Week {refuelling.startWeek}
            </button>
            <button 
              className={`week-btn ${selectedWeek === 2 ? 'active' : ''}`}
              onClick={() => setSelectedWeek(2)}
            >
              Week {refuelling.startWeek + 1}
            </button>
          </div>
        )}
        
        {isEarlyTraining && (
          <div className="early-training-note">
            <span className="note-icon">‚ö°</span>
            Since you train within 4 hours of waking, your meal timing has been adjusted.
          </div>
        )}
      </div>

      <div className="meals-container">
        {mealPlan.map((meal, index) => (
          <MealCard key={index} meal={meal} mealNumber={index + 1} />
        ))}
      </div>

      <div className="totals-summary refuelling">
        <h3>Daily Totals - {isDoubleWeek ? `Week ${refuelling.startWeek + selectedWeek - 1}` : `Week ${refuelling.startWeek}`}</h3>
        <div className="totals-grid">
          <div className="total-item">
            <span className="total-value">{Math.round(totals.calories)}</span>
            <span className="total-label">Calories</span>
            <span className="total-target">Target: {targetCalories}</span>
          </div>
          <div className="total-item">
            <span className="total-value">{Math.round(totals.protein)}g</span>
            <span className="total-label">Protein</span>
            <span className="total-target">Target: {refuelling.protein}g</span>
          </div>
          <div className="total-item">
            <span className="total-value">{Math.round(totals.carbs)}g</span>
            <span className="total-label">Carbs</span>
            <span className="total-target">Target: {targetCarbs}g</span>
          </div>
          <div className="total-item">
            <span className="total-value">{Math.round(totals.fats)}g</span>
            <span className="total-label">Fats</span>
            <span className="total-target">Target: {targetFats}g</span>
          </div>
          <div className="total-item">
            <span className="total-value">{Math.round(totals.fiber)}g</span>
            <span className="total-label">Fiber</span>
            <span className="total-target">Goal: 25-35g</span>
          </div>
        </div>
      </div>

      <div className="meal-plan-notes refuelling">
        <h3>üìå Refuelling Phase Notes</h3>
        <ul>
          <li>Higher fat foods (salmon, eggs, avocado, nuts) are included for hormonal support</li>
          <li>Increased carbohydrates will help restore muscle glycogen</li>
          <li>You may notice improved energy and training performance within days</li>
          <li>Some water weight gain is expected and beneficial for competition</li>
          <li>Maintain high vegetable intake for micronutrients and digestion</li>
        </ul>
      </div>
    </div>
  );
}

interface MealCardProps {
  meal: Meal;
  mealNumber: number;
}

function MealCard({ meal, mealNumber }: MealCardProps) {
  const mealTypeIcons: Record<string, string> = {
    'Breakfast': 'üåÖ',
    'Pre-Training': 'üí™',
    'Post-Training': 'üèãÔ∏è',
    'Lunch': '‚òÄÔ∏è',
    'Dinner': 'üåô',
    'Snack': 'üçé',
  };

  return (
    <div className={`meal-card ${meal.isPreTraining ? 'pre-training' : ''} ${meal.isPostTraining ? 'post-training' : ''}`}>
      <div className="meal-header">
        <div className="meal-title">
          <span className="meal-icon">{mealTypeIcons[meal.type] || 'üçΩÔ∏è'}</span>
          <div>
            <h4>{meal.name}</h4>
            <span className="meal-time">{meal.time}</span>
          </div>
        </div>
        <div className="meal-macros-summary">
          <span>{Math.round(meal.totalCalories)} kcal</span>
        </div>
      </div>
      
      <div className="meal-foods">
        {meal.foods.map((food, idx) => (
          <div key={idx} className="food-item">
            <div className="food-info">
              <span className="food-category">{food.category}</span>
              <span className="food-name">{food.name}</span>
              <span className="food-amount">{food.amount}g</span>
            </div>
            <div className="food-macros">
              <span className="macro-p" title="Protein">{Math.round(food.protein)}p</span>
              <span className="macro-c" title="Carbs">{Math.round(food.carbs)}c</span>
              <span className="macro-f" title="Fat">{Math.round(food.fat)}f</span>
              <span className="macro-fiber" title="Fiber">{Math.round(food.fiber)}fib</span>
            </div>
          </div>
        ))}
      </div>
      
      <div className="meal-totals">
        <div className="meal-total-item">
          <span className="label">Protein</span>
          <span className="value">{Math.round(meal.totalProtein)}g</span>
        </div>
        <div className="meal-total-item">
          <span className="label">Carbs</span>
          <span className="value">{Math.round(meal.totalCarbs)}g</span>
        </div>
        <div className="meal-total-item">
          <span className="label">Fats</span>
          <span className="value">{Math.round(meal.totalFats)}g</span>
        </div>
        <div className="meal-total-item">
          <span className="label">Fiber</span>
          <span className="value">{Math.round(meal.totalFiber)}g</span>
        </div>
      </div>
    </div>
  );
}

export default RefuellingMealPlan;
.refuelling-results {
  background: white;
  border-radius: 16px;
  padding: 30px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  border-top: 4px solid #4caf50;
}

.refuelling-results .results-header {
  text-align: center;
  margin-bottom: 25px;
}

.refuelling-results .results-header h2 {
  margin: 0 0 15px 0;
  color: #1a1a2e;
  font-size: 1.5rem;
}

.refuelling-results .phase-info {
  display: flex;
  justify-content: center;
  gap: 15px;
  flex-wrap: wrap;
}

.phase-badge.refuel {
  background: #e8f5e9;
  color: #2e7d32;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: 600;
}

.strategy-badge {
  background: #fff3e0;
  color: #e65100;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: 600;
}

.refuelling-explanation {
  text-align: center;
  margin-bottom: 25px;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 10px;
}

.refuelling-explanation p {
  margin: 0;
  color: #555;
  font-size: 0.95rem;
}

.weeks-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 25px;
}

.single-week {
  display: flex;
  justify-content: center;
  margin-bottom: 25px;
}

.week-card {
  background: linear-gradient(135deg, #f8f9fa 0%, #fff 100%);
  border: 2px solid #e0e0e0;
  border-radius: 16px;
  padding: 25px;
  text-align: center;
  transition: all 0.2s ease;
}

.week-card:hover {
  border-color: #ccc;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}

.week-card.final {
  background: linear-gradient(135deg, #e8f5e9 0%, #fff 100%);
  border-color: #4caf50;
}

.week-card.single {
  max-width: 400px;
  width: 100%;
}

.week-card h3 {
  margin: 0 0 8px 0;
  font-size: 1.2rem;
  color: #1a1a2e;
}

.week-description {
  margin: 0 0 20px 0;
  font-size: 0.85rem;
  color: #666;
}

.week-calories {
  margin-bottom: 20px;
}

.calories-value {
  display: block;
  font-size: 2.5rem;
  font-weight: 800;
  color: #4caf50;
  line-height: 1;
}

.calories-label {
  display: block;
  font-size: 0.9rem;
  color: #666;
  margin-top: 5px;
}

.week-macros {
  display: flex;
  justify-content: space-around;
  gap: 10px;
}

.week-macro {
  flex: 1;
  padding: 12px 8px;
  border-radius: 10px;
  text-align: center;
}

.week-macro.protein {
  background: #ffebee;
}

.week-macro.carb {
  background: #e3f2fd;
}

.week-macro.fat {
  background: #fff8e1;
}

.week-macro .value {
  display: block;
  font-size: 1.3rem;
  font-weight: 700;
  color: #333;
}

.week-macro .label {
  display: block;
  font-size: 0.75rem;
  color: #666;
  text-transform: uppercase;
  margin-top: 4px;
}

.refuelling-notes {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 12px;
  border-left: 4px solid #4caf50;
}

.refuelling-notes h4 {
  margin: 0 0 15px 0;
  font-size: 1rem;
  color: #1a1a2e;
}

.refuelling-notes ul {
  margin: 0;
  padding-left: 20px;
}

.refuelling-notes li {
  margin-bottom: 10px;
  color: #555;
  font-size: 0.9rem;
  line-height: 1.5;
}

.refuelling-notes li:last-child {
  margin-bottom: 0;
}

.refuelling-notes strong {
  color: #2e7d32;
}

@media (max-width: 768px) {
  .refuelling-results {
    padding: 20px;
  }
  
  .weeks-grid {
    grid-template-columns: 1fr;
  }
  
  .week-macros {
    flex-wrap: wrap;
  }
  
  .week-macro {
    flex: 1 1 30%;
  }
}
import React from 'react';
import './RefuellingResults.css';
import { RefuellingPhase, UserInputs } from '../../utils/calculations';

interface RefuellingResultsProps {
  refuelling: RefuellingPhase;
  inputs: UserInputs;
  tdee: number;
}

function RefuellingResults({ refuelling, inputs, tdee }: RefuellingResultsProps) {
  const isDoubleWeek = refuelling.weeks === 2;
  const maintenanceMinus5 = Math.round(tdee * 0.95);
  
  return (
    <div className="refuelling-results">
      <div className="results-header">
        <h2>üîÑ Refuelling Phase</h2>
        <p className="phase-info">
          {isDoubleWeek ? (
            <span className="phase-badge refuel">Weeks {refuelling.startWeek}-{refuelling.startWeek + 1}</span>
          ) : (
            <span className="phase-badge refuel">Week {refuelling.startWeek}</span>
          )}
          <span className="strategy-badge">
            {isDoubleWeek ? 'Progressive Refuelling' : 'Rapid Refuelling'}
          </span>
        </p>
      </div>
      
      <div className="refuelling-explanation">
        <p>
          {isDoubleWeek 
            ? 'Gradually increase calories over 2 weeks to restore glycogen, support recovery, and prepare for competition.'
            : 'Quickly restore glycogen and metabolic function in the final week before competition.'}
        </p>
      </div>
      
      {isDoubleWeek ? (
        <div className="weeks-grid">
          <div className="week-card">
            <h3>Week {refuelling.startWeek}</h3>
            <p className="week-description">Transition week - midpoint between deficit and maintenance</p>
            
            <div className="week-calories">
              <span className="calories-value">{refuelling.week1Calories}</span>
              <span className="calories-label">kcal/day</span>
            </div>
            
            <div className="week-macros">
              <div className="week-macro protein">
                <span className="value">{refuelling.protein}g</span>
                <span className="label">Protein</span>
              </div>
              <div className="week-macro carb">
                <span className="value">{refuelling.week1Carbs}g</span>
                <span className="label">Carbs</span>
              </div>
              <div className="week-macro fat">
                <span className="value">{refuelling.week1Fats}g</span>
                <span className="label">Fats</span>
              </div>
            </div>
          </div>
          
          <div className="week-card final">
            <h3>Week {refuelling.startWeek + 1}</h3>
            <p className="week-description">Final week - maintenance minus 5%</p>
            
            <div className="week-calories">
              <span className="calories-value">{refuelling.week2Calories}</span>
              <span className="calories-label">kcal/day</span>
            </div>
            
            <div className="week-macros">
              <div className="week-macro protein">
                <span className="value">{refuelling.protein}g</span>
                <span className="label">Protein</span>
              </div>
              <div className="week-macro carb">
                <span className="value">{refuelling.week2Carbs}g</span>
                <span className="label">Carbs</span>
              </div>
              <div className="week-macro fat">
                <span className="value">{refuelling.week2Fats}g</span>
                <span className="label">Fats</span>
              </div>
            </div>
          </div>
        </div>
      ) : (
        <div className="single-week">
          <div className="week-card final single">
            <h3>Week {refuelling.startWeek}</h3>
            <p className="week-description">Maintenance minus 5% - rapid glycogen restoration</p>
            
            <div className="week-calories">
              <span className="calories-value">{refuelling.week1Calories}</span>
              <span className="calories-label">kcal/day</span>
            </div>
            
            <div className="week-macros">
              <div className="week-macro protein">
                <span className="value">{refuelling.protein}g</span>
                <span className="label">Protein</span>
              </div>
              <div className="week-macro carb">
                <span className="value">{refuelling.week1Carbs}g</span>
                <span className="label">Carbs</span>
              </div>
              <div className="week-macro fat">
                <span className="value">{refuelling.week1Fats}g</span>
                <span className="label">Fats</span>
              </div>
            </div>
          </div>
        </div>
      )}
      
      <div className="refuelling-notes">
        <h4>üìù Refuelling Phase Notes</h4>
        <ul>
          <li><strong>Protein</strong> remains at 1g/lb to maintain muscle mass</li>
          <li><strong>Fats</strong> increase to 0.6g/kg for hormonal support and recovery</li>
          <li><strong>Carbs</strong> fill remaining calories to restore glycogen stores</li>
          <li>Expect weight to increase 1-2kg from glycogen and water retention - this is normal and desired</li>
          <li>Training intensity can gradually increase as energy improves</li>
        </ul>
      </div>
    </div>
  );
}

export default RefuellingResults;
export interface UserInputs {
  age: number;
  weight: number; // kg
  height: number; // cm
  gender: 'male' | 'female';
  steps: number;
  trainingSessions: number;
  cardioMinutes: number;
  weightToLose: number; // percentage
  risk: 'low' | 'medium' | 'high';
  refuelling: 'steady' | 'rapid';
  wakeTime: string;
  trainingTime: string;
}

export interface MacroResults {
  bmr: number;
  tdee: number;
  calories: number;
  protein: number;
  carbs: number;
  fats: number;
  deficitPercent: number;
  weeklyWeightLoss: number;
  stepsCalories: number;
  trainingCaloriesDaily: number;
  cardioCaloriesDaily: number;
  neatCalories: number;
}

export interface RefuellingPhase {
  weeks: number;
  startWeek: number;
  week1Calories: number;
  week2Calories?: number;
  protein: number;
  week1Carbs: number;
  week2Carbs?: number;
  week1Fats: number;
  week2Fats?: number;
}

// Mifflin-St Jeor Equation for BMR
function calculateBMR(weight: number, height: number, age: number, gender: 'male' | 'female'): number {
  if (gender === 'male') {
    return Math.round(10 * weight + 6.25 * height - 5 * age + 5);
  } else {
    return Math.round(10 * weight + 6.25 * height - 5 * age - 161);
  }
}

// Calculate calories burned from steps
function calculateStepsCalories(steps: number, weight: number): number {
  const caloriesPerStep = 0.00035 * weight + 0.02;
  return Math.round(steps * caloriesPerStep);
}

// Calculate training calories
function calculateTrainingCalories(sessions: number, weight: number): number {
  const mets = 4;
  const minutesPerSession = 90;
  const weeklyCalories = sessions * mets * weight * (minutesPerSession / 60);
  return Math.round(weeklyCalories / 7);
}

// Calculate cardio calories
function calculateCardioCalories(minutes: number, weight: number): number {
  const mets = 5;
  const weeklyCalories = mets * weight * (minutes / 60);
  return Math.round(weeklyCalories / 7);
}

// Calculate NEAT
function calculateNEAT(weight: number, steps: number): number {
  const baseNeat = weight * 3;
  const stepAdjustment = (steps - 5000) * 0.01;
  return Math.round(baseNeat + Math.max(0, stepAdjustment));
}

// Calculate deficit percentage based on inputs
function calculateDeficitPercent(inputs: UserInputs): number {
  const riskScore = inputs.risk === 'low' ? 1 : inputs.risk === 'medium' ? 0.5 : 0;
  const weightScore = 1 - (inputs.weightToLose - 4) / 4;
  const refuelScore = inputs.refuelling === 'steady' ? 1 : 0;
  const combinedScore = (riskScore * 0.35 + weightScore * 0.35 + refuelScore * 0.3);
  const deficitPercent = 30 + combinedScore * 20;
  return Math.round(deficitPercent);
}

export function calculateMacros(inputs: UserInputs): MacroResults {
  const bmr = calculateBMR(inputs.weight, inputs.height, inputs.age, inputs.gender);
  const stepsCalories = calculateStepsCalories(inputs.steps, inputs.weight);
  const trainingCaloriesDaily = calculateTrainingCalories(inputs.trainingSessions, inputs.weight);
  const cardioCaloriesDaily = calculateCardioCalories(inputs.cardioMinutes, inputs.weight);
  const neatCalories = calculateNEAT(inputs.weight, inputs.steps);
  
  const estimatedIntake = bmr * 0.7;
  const tef = Math.round(estimatedIntake * 0.1);
  
  const tdee = bmr + stepsCalories + trainingCaloriesDaily + cardioCaloriesDaily + neatCalories + tef;
  
  const deficitPercent = calculateDeficitPercent(inputs);
  const calories = Math.round(tdee * (1 - deficitPercent / 100));
  
  const weightLbs = inputs.weight * 2.205;
  const protein = Math.round(weightLbs);
  const fats = Math.round(inputs.weight * 0.35);
  
  const proteinCalories = protein * 4;
  const fatCalories = fats * 9;
  const remainingCalories = calories - proteinCalories - fatCalories;
  const carbs = Math.max(0, Math.round(remainingCalories / 4));
  
  const dailyDeficit = tdee - calories;
  const weeklyDeficit = dailyDeficit * 7;
  const weeklyWeightLoss = Math.round((weeklyDeficit / 7700) * 10) / 10;
  
  return {
    bmr,
    tdee,
    calories,
    protein,
    carbs,
    fats,
    deficitPercent,
    weeklyWeightLoss,
    stepsCalories,
    trainingCaloriesDaily,
    cardioCaloriesDaily,
    neatCalories,
  };
}

export function calculateRefuellingPhase(results: MacroResults, inputs: UserInputs): RefuellingPhase {
  const rapidFatLossWeeks = inputs.refuelling === 'steady' ? 3 : 4;
  const refuellingWeeks = inputs.refuelling === 'steady' ? 2 : 1;
  const startWeek = rapidFatLossWeeks + 1;
  
  const maintenanceCalories = Math.round(results.tdee * 0.95); // Maintenance - 5%
  const protein = results.protein; // Same as fat loss phase
  const fats = Math.round(inputs.weight * 0.6); // 0.6g per kg
  
  const proteinCalories = protein * 4;
  const fatCalories = fats * 9;
  
  if (refuellingWeeks === 2) {
    const midpointCalories = Math.round((results.calories + maintenanceCalories) / 2);
    const week1Carbs = Math.max(0, Math.round((midpointCalories - proteinCalories - fatCalories) / 4));
    const week2Carbs = Math.max(0, Math.round((maintenanceCalories - proteinCalories - fatCalories) / 4));
    
    return {
      weeks: 2,
      startWeek,
      week1Calories: midpointCalories,
      week2Calories: maintenanceCalories,
      protein,
      week1Carbs,
      week2Carbs,
      week1Fats: fats,
      week2Fats: fats,
    };
  } else {
    const carbs = Math.max(0, Math.round((maintenanceCalories - proteinCalories - fatCalories) / 4));
    
    return {
      weeks: 1,
      startWeek,
      week1Calories: maintenanceCalories,
      protein,
      week1Carbs: carbs,
      week1Fats: fats,
    };
  }
}
import { MacroResults, RefuellingPhase } from './calculations';

interface FoodItem {
  name: string;
  category: 'protein' | 'carb' | 'vegetable';
  per100g: {
    calories: number;
    protein: number;
    carbs: number;
    fat: number;
    fiber: number;
  };
}

const foodDatabase: FoodItem[] = [
  // Proteins
  { name: 'Chicken Breast (grilled)', category: 'protein', per100g: { calories: 165, protein: 31, carbs: 0, fat: 3.6, fiber: 0 } },
  { name: 'Egg Whites (cooked)', category: 'protein', per100g: { calories: 52, protein: 11, carbs: 0.7, fat: 0.2, fiber: 0 } },
  { name: 'Greek Yogurt (0% fat)', category: 'protein', per100g: { calories: 59, protein: 10, carbs: 3.6, fat: 0.7, fiber: 0 } },
  { name: 'Lean Beef (95% lean)', category: 'protein', per100g: { calories: 137, protein: 26, carbs: 0, fat: 4, fiber: 0 } },
  { name: 'White Fish (tilapia)', category: 'protein', per100g: { calories: 96, protein: 20, carbs: 0, fat: 1.7, fiber: 0 } },
  { name: 'Cottage Cheese (1% fat)', category: 'protein', per100g: { calories: 72, protein: 12, carbs: 2.7, fat: 1, fiber: 0 } },
  { name: 'Turkey Breast (roasted)', category: 'protein', per100g: { calories: 135, protein: 30, carbs: 0, fat: 1, fiber: 0 } },
  { name: 'Shrimp (cooked)', category: 'protein', per100g: { calories: 99, protein: 24, carbs: 0.2, fat: 0.3, fiber: 0 } },
  { name: 'Salmon (baked)', category: 'protein', per100g: { calories: 208, protein: 20, carbs: 0, fat: 13, fiber: 0 } },
  { name: 'Whole Eggs (scrambled)', category: 'protein', per100g: { calories: 149, protein: 10, carbs: 1.6, fat: 11, fiber: 0 } },
  
  // Carbs
  { name: 'White Rice (cooked)', category: 'carb', per100g: { calories: 130, protein: 2.7, carbs: 28, fat: 0.3, fiber: 0.4 } },
  { name: 'Oats (dry weight)', category: 'carb', per100g: { calories: 389, protein: 17, carbs: 66, fat: 7, fiber: 10 } },
  { name: 'Sweet Potato (baked)', category: 'carb', per100g: { calories: 86, protein: 1.6, carbs: 20, fat: 0.1, fiber: 3 } },
  { name: 'Banana', category: 'carb', per100g: { calories: 89, protein: 1.1, carbs: 23, fat: 0.3, fiber: 2.6 } },
  { name: 'Whole Wheat Bread', category: 'carb', per100g: { calories: 247, protein: 13, carbs: 41, fat: 3.4, fiber: 7 } },
  { name: 'Quinoa (cooked)', category: 'carb', per100g: { calories: 120, protein: 4.4, carbs: 21, fat: 1.9, fiber: 2.8 } },
  { name: 'Potato (boiled)', category: 'carb', per100g: { calories: 87, protein: 1.9, carbs: 20, fat: 0.1, fiber: 1.8 } },
  { name: 'Cream of Rice (cooked)', category: 'carb', per100g: { calories: 52, protein: 1, carbs: 11, fat: 0.2, fiber: 0.2 } },
  
  // Vegetables
  { name: 'Broccoli (steamed)', category: 'vegetable', per100g: { calories: 35, protein: 2.4, carbs: 7, fat: 0.4, fiber: 3.3 } },
  { name: 'Spinach (raw)', category: 'vegetable', per100g: { calories: 23, protein: 2.9, carbs: 3.6, fat: 0.4, fiber: 2.2 } },
  { name: 'Mixed Berries', category: 'vegetable', per100g: { calories: 57, protein: 0.7, carbs: 14, fat: 0.3, fiber: 2 } },
  { name: 'Asparagus (cooked)', category: 'vegetable', per100g: { calories: 22, protein: 2.4, carbs: 4, fat: 0.2, fiber: 2 } },
  { name: 'Bell Peppers (raw)', category: 'vegetable', per100g: { calories: 31, protein: 1, carbs: 6, fat: 0.3, fiber: 2.1 } },
  { name: 'Zucchini (cooked)', category: 'vegetable', per100g: { calories: 17, protein: 1.2, carbs: 3, fat: 0.3, fiber: 1 } },
  { name: 'Green Beans (cooked)', category: 'vegetable', per100g: { calories: 35, protein: 1.9, carbs: 8, fat: 0.3, fiber: 3.4 } },
  { name: 'Cucumber (raw)', category: 'vegetable', per100g: { calories: 15, protein: 0.7, carbs: 3.6, fat: 0.1, fiber: 0.5 } },
  
  // Fats (for refuelling phase)
  { name: 'Avocado', category: 'vegetable', per100g: { calories: 160, protein: 2, carbs: 9, fat: 15, fiber: 7 } },
  { name: 'Almonds', category: 'vegetable', per100g: { calories: 579, protein: 21, carbs: 22, fat: 50, fiber: 12 } },
  { name: 'Olive Oil (1 tbsp = 14g)', category: 'vegetable', per100g: { calories: 884, protein: 0, carbs: 0, fat: 100, fiber: 0 } },
];

export interface FoodPortion {
  name: string;
  category: string;
  amount: number;
  calories: number;
  protein: number;
  carbs: number;
  fat: number;
  fiber: number;
}

export interface Meal {
  name: string;
  type: string;
  time: string;
  foods: FoodPortion[];
  totalCalories: number;
  totalProtein: number;
  totalCarbs: number;
  totalFats: number;
  totalFiber: number;
  isPreTraining?: boolean;
  isPostTraining?: boolean;
}

interface MealTarget {
  protein: number;
  carbs: number;
  fats: number;
  name: string;
  type: string;
  time: string;
  isPreTraining?: boolean;
  isPostTraining?: boolean;
}

function getFood(name: string): FoodItem | undefined {
  return foodDatabase.find(f => f.name === name);
}

function calculatePortion(food: FoodItem, grams: number): FoodPortion {
  const multiplier = grams / 100;
  return {
    name: food.name,
    category: food.category,
    amount: Math.round(grams),
    calories: food.per100g.calories * multiplier,
    protein: food.per100g.protein * multiplier,
    carbs: food.per100g.carbs * multiplier,
    fat: food.per100g.fat * multiplier,
    fiber: food.per100g.fiber * multiplier,
  };
}

export function getTimeDifferenceHours(time1: string, time2: string): number {
  const [h1, m1] = time1.split(':').map(Number);
  const [h2, m2] = time2.split(':').map(Number);
  const minutes1 = h1 * 60 + m1;
  const minutes2 = h2 * 60 + m2;
  return (minutes2 - minutes1) / 60;
}

function addHoursToTime(time: string, hours: number): string {
  const [h, m] = time.split(':').map(Number);
  let newHours = h + Math.floor(hours);
  let newMinutes = m + Math.round((hours % 1) * 60);
  if (newMinutes >= 60) {
    newHours++;
    newMinutes -= 60;
  }
  if (newHours >= 24) newHours -= 24;
  return `${String(newHours).padStart(2, '0')}:${String(newMinutes).padStart(2, '0')}`;
}

export function formatTime(time: string): string {
  const [h, m] = time.split(':').map(Number);
  const period = h >= 12 ? 'PM' : 'AM';
  const hour12 = h % 12 || 12;
  return `${hour12}:${String(m).padStart(2, '0')} ${period}`;
}

function buildMealFromTarget(target: MealTarget, mealIndex: number, isRefuelling: boolean = false): Meal {
  const foods: FoodPortion[] = [];
  let remainingProtein = target.protein;
  let remainingCarbs = target.carbs;
  let remainingFats = target.fats;
  
  // Protein sources rotation
  const proteinSources = isRefuelling 
    ? ['Chicken Breast (grilled)', 'Salmon (baked)', 'Lean Beef (95% lean)', 'Whole Eggs (scrambled)']
    : ['Chicken Breast (grilled)', 'Egg Whites (cooked)', 'White Fish (tilapia)', 'Lean Beef (95% lean)', 'Greek Yogurt (0% fat)', 'Cottage Cheese (1% fat)'];
  
  const carbSources = ['White Rice (cooked)', 'Sweet Potato (baked)', 'Oats (dry weight)', 'Potato (boiled)', 'Quinoa (cooked)', 'Banana'];
  const vegSources = ['Broccoli (steamed)', 'Asparagus (cooked)', 'Green Beans (cooked)', 'Bell Peppers (raw)', 'Spinach (raw)', 'Mixed Berries'];
  
  // Select protein source based on meal
  const proteinSourceName = proteinSources[mealIndex % proteinSources.length];
  const proteinFood = getFood(proteinSourceName)!;
  const proteinGrams = Math.round((remainingProtein / proteinFood.per100g.protein) * 100);
  const proteinPortion = calculatePortion(proteinFood, Math.min(proteinGrams, 300));
  foods.push(proteinPortion);
  
  remainingProtein -= proteinPortion.protein;
  remainingCarbs -= proteinPortion.carbs;
  remainingFats -= proteinPortion.fat;
  
  // Select carb source
  if (remainingCarbs > 5) {
    const carbSourceName = carbSources[mealIndex % carbSources.length];
    const carbFood = getFood(carbSourceName)!;
    const carbGrams = Math.round((remainingCarbs / carbFood.per100g.carbs) * 100);
    const carbPortion = calculatePortion(carbFood, Math.max(0, Math.min(carbGrams, 350)));
    if (carbPortion.amount > 0) {
      foods.push(carbPortion);
      remainingCarbs -= carbPortion.carbs;
      remainingFats -= carbPortion.fat;
    }
  }
  
  // Add fat source for refuelling phase if needed
  if (isRefuelling && remainingFats > 5) {
    const fatSources = ['Avocado', 'Almonds', 'Olive Oil (1 tbsp = 14g)'];
    const fatSourceName = fatSources[mealIndex % fatSources.length];
    const fatFood = getFood(fatSourceName)!;
    const fatGrams = Math.round((remainingFats / fatFood.per100g.fat) * 100);
    const fatPortion = calculatePortion(fatFood, Math.max(0, Math.min(fatGrams, 100)));
    if (fatPortion.amount > 0) {
      foods.push(fatPortion);
      remainingFats -= fatPortion.fat;
    }
  }
  
  // Add vegetables
  const vegSourceName = vegSources[mealIndex % vegSources.length];
  const vegFood = getFood(vegSourceName)!;
  const vegPortion = calculatePortion(vegFood, 100);
  foods.push(vegPortion);
  
  return {
    name: target.name,
    type: target.type,
    time: target.time,
    foods,
    totalCalories: foods.reduce((sum, f) => sum + f.calories, 0),
    totalProtein: foods.reduce((sum, f) => sum + f.protein, 0),
    totalCarbs: foods.reduce((sum, f) => sum + f.carbs, 0),
    totalFats: foods.reduce((sum, f) => sum + f.fat, 0),
    totalFiber: foods.reduce((sum, f) => sum + f.fiber, 0),
    isPreTraining: target.isPreTraining,
    isPostTraining: target.isPostTraining,
  };
}

export function generateMealPlan(results: MacroResults, wakeTime: string, trainingTime: string): Meal[] {
  const targetProtein = results.protein;
  const targetCarbs = results.carbs;
  const targetFats = results.fats;
  
  const hoursToTraining = getTimeDifferenceHours(wakeTime, trainingTime);
  const isEarlyTraining = hoursToTraining >= 0 && hoursToTraining <= 4;
  
  const mealTargets: MealTarget[] = [];
  
  // Distribute macros across 4 meals
  // Prioritize carbs around training (60% pre/post, 40% other meals)
  const proteinPerMeal = targetProtein / 4;
  const carbsAroundTraining = targetCarbs * 0.6;
  const carbsOtherMeals = targetCarbs * 0.4;
  const fatsPerMeal = targetFats / 4;
  
  if (isEarlyTraining) {
    const preTrainingTime = addHoursToTime(trainingTime, -1);
    const postTrainingTime = addHoursToTime(trainingTime, 2);
    const lunchTime = addHoursToTime(postTrainingTime, 3);
    const dinnerTime = addHoursToTime(lunchTime, 4);
    
    // Pre-training (lighter, 20% of protein, 25% of training carbs)
    mealTargets.push({
      protein: proteinPerMeal * 0.8,
      carbs: carbsAroundTraining * 0.25,
      fats: fatsPerMeal * 0.5,
      name: 'Light Pre-Training',
      type: 'Pre-Training',
      time: formatTime(preTrainingTime),
      isPreTraining: true,
    });
    
    // Post-training (larger, 30% of protein, 35% of training carbs)
    mealTargets.push({
      protein: proteinPerMeal * 1.2,
      carbs: carbsAroundTraining * 0.75,
      fats: fatsPerMeal * 0.5,
      name: 'Post-Training Breakfast',
      type: 'Post-Training',
      time: formatTime(postTrainingTime),
      isPostTraining: true,
    });
    
    // Lunch (25% of protein, 50% of other carbs)
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsOtherMeals * 0.5,
      fats: fatsPerMeal * 1.5,
      name: 'Lunch',
      type: 'Lunch',
      time: formatTime(lunchTime),
    });
    
    // Dinner (25% of protein, 50% of other carbs)
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsOtherMeals * 0.5,
      fats: fatsPerMeal * 1.5,
      name: 'Dinner',
      type: 'Dinner',
      time: formatTime(dinnerTime),
    });
  } else {
    const breakfastTime = addHoursToTime(wakeTime, 0.5);
    const preTrainingTime = addHoursToTime(trainingTime, -2);
    const postTrainingTime = addHoursToTime(trainingTime, 2);
    const snackTime = addHoursToTime(postTrainingTime, 3);
    
    // Breakfast
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsOtherMeals * 0.5,
      fats: fatsPerMeal,
      name: 'Breakfast',
      type: 'Breakfast',
      time: formatTime(breakfastTime),
    });
    
    // Pre-training / Lunch
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsAroundTraining * 0.45,
      fats: fatsPerMeal,
      name: 'Lunch / Pre-Training',
      type: 'Pre-Training',
      time: formatTime(preTrainingTime),
      isPreTraining: true,
    });
    
    // Post-training / Dinner
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsAroundTraining * 0.55,
      fats: fatsPerMeal,
      name: 'Dinner / Post-Training',
      type: 'Post-Training',
      time: formatTime(postTrainingTime),
      isPostTraining: true,
    });
    
    // Evening Snack
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsOtherMeals * 0.5,
      fats: fatsPerMeal,
      name: 'Evening Snack',
      type: 'Snack',
      time: formatTime(snackTime),
    });
  }
  
  return mealTargets.map((target, index) => buildMealFromTarget(target, index, false));
}

export function generateRefuellingMealPlan(
  refuelling: RefuellingPhase,
  week: 1 | 2,
  wakeTime: string,
  trainingTime: string
): Meal[] {
  const targetProtein = refuelling.protein;
  const targetCarbs = week === 1 ? refuelling.week1Carbs : (refuelling.week2Carbs || refuelling.week1Carbs);
  const targetFats = week === 1 ? refuelling.week1Fats : (refuelling.week2Fats || refuelling.week1Fats);
  
  const hoursToTraining = getTimeDifferenceHours(wakeTime, trainingTime);
  const isEarlyTraining = hoursToTraining >= 0 && hoursToTraining <= 4;
  
  const mealTargets: MealTarget[] = [];
  
  const proteinPerMeal = targetProtein / 4;
  const carbsAroundTraining = targetCarbs * 0.55;
  const carbsOtherMeals = targetCarbs * 0.45;
  const fatsPerMeal = targetFats / 4;
  
  if (isEarlyTraining) {
    const preTrainingTime = addHoursToTime(trainingTime, -1);
    const postTrainingTime = addHoursToTime(trainingTime, 2);
    const lunchTime = addHoursToTime(postTrainingTime, 3);
    const dinnerTime = addHoursToTime(lunchTime, 4);
    
    mealTargets.push({
      protein: proteinPerMeal * 0.8,
      carbs: carbsAroundTraining * 0.3,
      fats: fatsPerMeal * 0.5,
      name: 'Light Pre-Training',
      type: 'Pre-Training',
      time: formatTime(preTrainingTime),
      isPreTraining: true,
    });
    
    mealTargets.push({
      protein: proteinPerMeal * 1.2,
      carbs: carbsAroundTraining * 0.7,
      fats: fatsPerMeal * 0.5,
      name: 'Post-Training Breakfast',
      type: 'Post-Training',
      time: formatTime(postTrainingTime),
      isPostTraining: true,
    });
    
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsOtherMeals * 0.5,
      fats: fatsPerMeal * 1.5,
      name: 'Lunch',
      type: 'Lunch',
      time: formatTime(lunchTime),
    });
    
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsOtherMeals * 0.5,
      fats: fatsPerMeal * 1.5,
      name: 'Dinner',
      type: 'Dinner',
      time: formatTime(dinnerTime),
    });
  } else {
    const breakfastTime = addHoursToTime(wakeTime, 0.5);
    const preTrainingTime = addHoursToTime(trainingTime, -2);
    const postTrainingTime = addHoursToTime(trainingTime, 2);
    const snackTime = addHoursToTime(postTrainingTime, 3);
    
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsOtherMeals * 0.5,
      fats: fatsPerMeal,
      name: 'Breakfast',
      type: 'Breakfast',
      time: formatTime(breakfastTime),
    });
    
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsAroundTraining * 0.45,
      fats: fatsPerMeal,
      name: 'Lunch / Pre-Training',
      type: 'Pre-Training',
      time: formatTime(preTrainingTime),
      isPreTraining: true,
    });
    
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsAroundTraining * 0.55,
      fats: fatsPerMeal,
      name: 'Dinner / Post-Training',
      type: 'Post-Training',
      time: formatTime(postTrainingTime),
      isPostTraining: true,
    });
    
    mealTargets.push({
      protein: proteinPerMeal,
      carbs: carbsOtherMeals * 0.5,
      fats: fatsPerMeal,
      name: 'Evening Snack',
      type: 'Snack',
      time: formatTime(snackTime),
    });
  }
  
  return mealTargets.map((target, index) => buildMealFromTarget(target, index + 4, true));
}
type Persistence = {
  setItem(key: string, value: string): Promise<void>;
  getItem(key: string): Promise<string | null>;
  removeItem(key: string): Promise<void>;
  clear(): Promise<void>;
};

export const persistence: Persistence = {
  setItem(key, value) {
    return window.persistentStorage.setItem(key, value);
  },
  getItem(key) {
    return window.persistentStorage.getItem(key);
  },
  removeItem(key) {
    return window.persistentStorage.removeItem(key);
  },
  clear() {
    return window.persistentStorage.clear();
  },
};
.calculator-app {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  color: #1a1a2e;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  min-height: 100vh;
}

.app-header {
  text-align: center;
  margin-bottom: 30px;
  padding: 30px 20px;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  border-radius: 16px;
  color: white;
  box-shadow: 0 4px 20px rgba(26, 26, 46, 0.3);
}

.app-header h1 {
  margin: 0 0 10px 0;
  font-size: clamp(1.5rem, 4vw, 2.2rem);
  font-weight: 700;
  letter-spacing: -0.5px;
}

.subtitle {
  margin: 0;
  font-size: 1rem;
  opacity: 0.9;
  color: #e94560;
  font-weight: 500;
}

.app-main {
  display: flex;
  flex-direction: column;
  gap: 30px;
}

.results-container {
  display: flex;
  flex-direction: column;
  gap: 30px;
  animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.app-footer {
  margin-top: 40px;
  padding: 20px;
  background: #fff;
  border-radius: 12px;
  border-left: 4px solid #e94560;
}

.disclaimer {
  margin: 0;
  font-size: 0.85rem;
  color: #666;
  line-height: 1.6;
}

.disclaimer strong {
  color: #e94560;
}

@media (max-width: 768px) {
  .calculator-app {
    padding: 15px;
  }
  
  .app-header {
    padding: 20px 15px;
  }
}
import React, { useState } from 'react';
import './App.css';
import CalculatorForm from './features/calculator/CalculatorForm';
import MacroResults from './features/calculator/MacroResults';
import RefuellingResults from './features/calculator/RefuellingResults';
import MealPlan from './features/calculator/MealPlan';
import RefuellingMealPlan from './features/calculator/RefuellingMealPlan';
import FluidGuidelines from './features/calculator/FluidGuidelines';
import { calculateMacros, calculateRefuellingPhase, MacroResults as MacroResultsType, RefuellingPhase, UserInputs } from './utils/calculations';

function App() {
  const [results, setResults] = useState<MacroResultsType | null>(null);
  const [refuellingPhase, setRefuellingPhase] = useState<RefuellingPhase | null>(null);
  const [inputs, setInputs] = useState<UserInputs | null>(null);

  const handleCalculate = (userInputs: UserInputs) => {
    const macros = calculateMacros(userInputs);
    const refuelling = calculateRefuellingPhase(macros, userInputs);
    setResults(macros);
    setRefuellingPhase(refuelling);
    setInputs(userInputs);
  };

  return (
    <div className="calculator-app">
      <header className="app-header">
        <h1>Olympic Weightlifting Weight Cut Calculator</h1>
        <p className="subtitle">Rapid Fat Loss & Refuelling Phase Macro Calculator</p>
      </header>
      
      <main className="app-main">
        <CalculatorForm onCalculate={handleCalculate} />
        
        {results && inputs && refuellingPhase && (
          <div className="results-container">
            <MacroResults results={results} inputs={inputs} />
            <MealPlan 
              results={results} 
              wakeTime={inputs.wakeTime} 
              trainingTime={inputs.trainingTime}
            />
            
            <RefuellingResults refuelling={refuellingPhase} inputs={inputs} tdee={results.tdee} />
            <RefuellingMealPlan 
              refuelling={refuellingPhase}
              wakeTime={inputs.wakeTime} 
              trainingTime={inputs.trainingTime}
            />
            
            <FluidGuidelines weightKg={inputs.weight} />
          </div>
        )}
      </main>
      
      <footer className="app-footer">
        <p className="disclaimer">
          <strong>Disclaimer:</strong> This calculator provides estimates for educational purposes only. 
          Consult with a qualified sports dietitian or healthcare professional before starting any 
          weight cut protocol. Individual results may vary.
        </p>
      </footer>
    </div>
  );
}

export default App;
import React from 'react';
import { createRoot } from 'react-dom/client';
import App from './App';

const container = document.getElementById('app');
if (container) {
  const root = createRoot(container);
  root.render(
    <React.StrictMode>
      <App />
    </React.StrictMode>
  );
}
